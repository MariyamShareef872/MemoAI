<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="UTF-8">
    <title>Manage Flashcards</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='background.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='manage_flashcards.css') }}">
    <script>
        function searchFlashcards() {
            const input = document.getElementById("searchInput").value.toLowerCase();
            const rows = document.querySelectorAll("tbody tr");

            rows.forEach(row => {
                const question = row.querySelector("td").textContent.toLowerCase();
                row.style.display = question.includes(input) ? "" : "none";
            });
        }
    </script>
    </head>
<body>
    <!-- Header with logo -->
    <header>
        <div class="logo-container">
            <img src="{{ url_for('static', filename='images/logo3.png') }}" class="logo" alt="MemoAI Logo">
            
        </div>
    </header>
    {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="flash-message {{ category }}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}
    <div class="top-bar">
        <h1 class="page-title">📚 Manage Flashcards</h1>
        <input type="text" id="searchInput" placeholder="🔍 Search flashcards..." onkeyup="searchFlashcards()">
    </div>

    <table>
        <thead>
            <tr>
                <th>Question</th>
                <th>Answer</th>
                <th>Deadline</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for flashcard in flashcards %}
            <tr>
                <td>{{ flashcard.question }}</td>
                <td>{{ flashcard.answer }}</td>
                <td>
                    {% if flashcard.assignments %}
                {{ flashcard.assignments[0].deadline.strftime('%Y-%m-%d') }}
                    {% else %}
                  📅 No deadline
                {% endif %}
                  </td>
                <td>
                    <a href="{{ url_for('edit_flashcard', flashcard_id=flashcard.id) }}" class="btn-edit">✏️ Edit</a><br>
                    <form action="{{ url_for('delete_flashcard', flashcard_id=flashcard.id) }}" method="POST" style="display:inline;">
                        <button type="submit" class="btn-delete" onclick="return confirm('Are you sure you want to delete this flashcard?')">🗑️ Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
            
        </tbody>
    </table>
    <div class="back-btn-container">
        <a href="{{ url_for('teacher_dashboard') }}" class="back-btn">🔙 Back to Dashboard</a>
    </div>
</body>
</html>
